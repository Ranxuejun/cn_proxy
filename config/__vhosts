# Data information resource subdomain
<VirtualHost *:80>

  ServerName          <%= ENV['data_server_name'] %>
  AllowEncodedSlashes On

  ServerAdmin      kward@crossref.org
  ErrorLog         /var/log/apache2/cnproxy_data_error_log
  TransferLog      /var/log/apache2/cnproxy_data_access_log
  UseCanonicalName Off

  DocumentRoot /home/webapps/cn_proxy/current/public
  <Directory /home/webapps/cn_proxy/current/public>
    Allow from all
    Options -MultiViews
  </Directory>

  PassengerMinInstances 5
</VirtualHost>

# Id non-information resource subdomain
<VirtualHost *:80>

  ServerName          <%= ENV['id_server_name'] %>
  AllowEncodedSlashes On

  ServerAdmin      kward@crossref.org
  ErrorLog         /var/log/apache2/cnproxy_id_error_log
  TransferLog      /var/log/apache2/cnproxy_id_access_log
  UseCanonicalName Off

  DocumentRoot /home/webapps/cn_proxy/current/public
  <Directory /home/webapps/cn_proxy/current/public>
    Allow from all
    Options -MultiViews
  </Directory>

  PassengerMinInstances 5
</VirtualHost>

PassengerPreStart http://<%= ENV['data_server_name'] %>/
PassengerPreStart http://<%= ENV['id_server_name'] %>/